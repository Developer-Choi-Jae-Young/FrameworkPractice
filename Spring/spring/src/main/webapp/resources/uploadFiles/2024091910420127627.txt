CREATE TABLE Member (
	MNO	NUMBER		NOT NULL,
	MID	VARCHAR2(50)		NOT NULL,
	MPW	VARCHAR2(50)		NOT NULL,
	MNICKNAME	VARCHAR2(50)		NOT NULL,
	MEMAIL	VARCHAR2(50)		NOT NULL,
	MADDRESS	VARCHAR2(50)		NOT NULL,
	MPHONE	VARCHAR2(50)		NOT NULL
);

CREATE TABLE Club (
	CNO	NUMBER		NOT NULL,
	CNAME	VARCHAR2(50)		NOT NULL,
	COPENINGDATE	DATE	DEFAULT SYSDATE	NOT NULL
);

CREATE TABLE Board (
	BNO	NUMBER		NOT NULL,
	MNO	NUMBER		NOT NULL,
	KBNO	NUMBER		NOT NULL,
	BTITLE	VARCHAR2(300)		NOT NULL,
	BDATE	DATE	DEFAULT SYSDATE	NOT NULL,
	BCONTENT	VARCHAR2(3000)		NOT NULL
);

CREATE TABLE Review (
	RVNO	NUMBER		NOT NULL,
	KBNO	NUMBER		NOT NULL,
	RCNO	NUMBER		NOT NULL,
	STAR	NUMBER		NOT NULL
);

CREATE TABLE Category (
	CATENO	NUMBER		NOT NULL,
	CATENAME	VARCHAR(50)		NOT NULL
);

CREATE TABLE Calendar (
	CALNO	NUMBER		NOT NULL,
	KBNO	NUMBER		NOT NULL,
	ST_SCHEDULE	DATE	DEFAULT SYSDATE	NOT NULL,
	EN_SCHEDULE	DATE	DEFAULT SYSDATE	NOT NULL
);

CREATE TABLE Reply (
	RNO	NUMBER		NOT NULL,
	BNO	NUMBER		NOT NULL,
	MNO	NUMBER		NOT NULL,
	RDATE	DATE	DEFAULT SYSDATE	NOT NULL,
	RCOMPLAINT	NUMBER	DEFAULT 0	NOT NULL,
	RCONTENT	VARCHAR2(3000)		NOT NULL,
	PARENT_RNO	NUMBER		NOT NULL
);

CREATE TABLE BookMark (
	BNO	NUMBER		NOT NULL,
	MNO	NUMBER		NOT NULL
);

CREATE TABLE SmallGroup (
	SGNO	NUMBER		NOT NULL,
	SGNAME	VARCHAR2(50)		NOT NULL
);

CREATE TABLE CategoryBoard (
	CBNO	NUMBER		NOT NULL,
	SGCNO	NUMBER		NOT NULL,
	CNO	NUMBER		NOT NULL,
	KBNO	NUMBER		NOT NULL,
	RCNO	NUMBER		NOT NULL,
	COMPLAIN	NUMBER		NOT NULL,
	VIEWS	NUMBER		NOT NULL,
	SCRAP	NUMBER		NOT NULL,
	CBIMG	VARCHAR2(255)	NULL,
	MAX_COUNT	NUMBER		NOT NULL,
	CUR_COUNT	NUMBER		NOT NULL
);

CREATE TABLE BookCategory (
	BCNO	NUMBER		NOT NULL,
	BNO	NUMBER		NOT NULL,
	CBNO	NUMBER		NOT NULL,
	KBNO	NUMBER		NOT NULL
);

CREATE TABLE KindOfBoard (
	KBNO	NUMBER		NOT NULL,
	KBNAME	VARCHAR2(50)		NOT NULL
);

CREATE TABLE MemberClub (
	RFCNO	NUMBER		NOT NULL,
	MNO	NUMBER		NULL,
	CNO	NUMBER		NULL
);

CREATE TABLE SmallGroupCategory (
	SGCNO	NUMBER		NOT NULL,
	SGNO	NUMBER		NOT NULL,
	CATENO	NUMBER		NOT NULL
);

ALTER TABLE Member ADD CONSTRAINT PK_MEMBER PRIMARY KEY (
	MNO
);

ALTER TABLE Club ADD CONSTRAINT PK_CLUB PRIMARY KEY (
	CNO
);

ALTER TABLE Board ADD CONSTRAINT PK_BOARD PRIMARY KEY (
	BNO
);

ALTER TABLE Review ADD CONSTRAINT PK_REVIEW PRIMARY KEY (
	RVNO
);

ALTER TABLE Category ADD CONSTRAINT PK_CATEGORY PRIMARY KEY (
	CATENO
);

ALTER TABLE Calendar ADD CONSTRAINT PK_CALENDAR PRIMARY KEY (
	CALNO
);

ALTER TABLE Reply ADD CONSTRAINT PK_REPLY PRIMARY KEY (
	RNO
);

ALTER TABLE BookMark ADD CONSTRAINT PK_BOOKMARK PRIMARY KEY (
	BNO
);

ALTER TABLE SmallGroup ADD CONSTRAINT PK_SMALLGROUP PRIMARY KEY (
	SGNO
);

ALTER TABLE CategoryBoard ADD CONSTRAINT PK_CATEGORYBOARD PRIMARY KEY (
	CBNO
);

ALTER TABLE BookCategory ADD CONSTRAINT PK_BOOKCATEGORY PRIMARY KEY (
	BCNO
);

ALTER TABLE KindOfBoard ADD CONSTRAINT PK_KINDOFBOARD PRIMARY KEY (
	KBNO
);

ALTER TABLE MemberClub ADD CONSTRAINT PK_MEMBERCLUB PRIMARY KEY (
	RFCNO
);
ALTER TABLE SmallGroupCategory ADD CONSTRAINT PK_SMALLGROUPCATEGORY PRIMARY KEY (
	SGCNO
);

ALTER TABLE Board ADD CONSTRAINT FK_Member_TO_Board_1 FOREIGN KEY (
    MNO
)
REFERENCES Member (
	MNO
);

ALTER TABLE Board ADD CONSTRAINT FK_KindOfBoard_TO_Board_1 FOREIGN KEY (
	KBNO
)
REFERENCES KindOfBoard (
    KBNO
);

ALTER TABLE Review ADD CONSTRAINT FK_KindOfBoard_TO_Review_1 FOREIGN KEY (
	KBNO
)
REFERENCES KindOfBoard (
	KBNO
);

ALTER TABLE Calendar ADD CONSTRAINT FK_KindOfBoard_TO_Calendar_1 FOREIGN KEY (
	KBNO
)
REFERENCES KindOfBoard (
	KBNO
);

ALTER TABLE MemberClub ADD CONSTRAINT FK_Member_TO_MemberClub_1 FOREIGN KEY (
	MNO
)
REFERENCES Member (
	MNO
);

ALTER TABLE MemberClub ADD CONSTRAINT FK_Club_TO_MemberClub_1 FOREIGN KEY (
	CNO
)
REFERENCES Club (
	CNO
);

ALTER TABLE Reply ADD CONSTRAINT FK_Board_TO_Reply_1 FOREIGN KEY (
	BNO
)
REFERENCES Board (
	BNO
);

ALTER TABLE Reply ADD CONSTRAINT FK_Member_TO_Reply_1 FOREIGN KEY (
	MNO
)
REFERENCES Member (
	MNO
);

ALTER TABLE BookMark ADD CONSTRAINT FK_Member_TO_BookMark_1 FOREIGN KEY (
	MNO
)
REFERENCES Member (
	MNO
);

ALTER TABLE CategoryBoard ADD CONSTRAINT FK_Club_TO_CategoryBoard_1 FOREIGN KEY (
	CNO
)
REFERENCES Club (
	CNO
);

ALTER TABLE CategoryBoard ADD CONSTRAINT FK_KindOfBoard_TO_CategoryBoard_1 FOREIGN KEY (
	KBNO
)
REFERENCES KindOfBoard (
	KBNO
);

ALTER TABLE BookCategory ADD CONSTRAINT FK_BookMark_TO_BookCategory_1 FOREIGN KEY (
	BNO
)
REFERENCES BookMark (
	BNO
);

ALTER TABLE BookCategory ADD CONSTRAINT FK_CategoryBoard_TO_BookCategory_1 FOREIGN KEY (
	CBNO
)
REFERENCES CategoryBoard (
	CBNO
);

ALTER TABLE SmallGroupCategory ADD CONSTRAINT FK_Category_TO_SmallGroupCategory_1 FOREIGN KEY (
	CATENO
)
REFERENCES Category (
	CATENO
);


ALTER TABLE CategoryBoard ADD CONSTRAINT FK_SmallGroupCategory_TO_CategoryBoard_1 FOREIGN KEY (
	SGCNO
)
REFERENCES SmallGroupCategory (
	SGCNO
);


SELECT * FROM KindOfBoard K JOIN Board B ON (K.KBNO = B.KBNO) JOIN CategoryBoard C ON (K.KBNO = C.KBNO);